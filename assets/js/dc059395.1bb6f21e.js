"use strict";(self.webpackChunk_spotifly_website=self.webpackChunk_spotifly_website||[]).push([[620],{7186:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>n,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var r=a(4246),i=a(1670),l=a(5705);const s={title:"Library",tags:["cli"]},n=void 0,o={id:"packages/library/library",title:"Library",description:"npm Codecov",source:"@site/docs/packages/library/library.mdx",sourceDirName:"packages/library",slug:"/packages/library/",permalink:"/docs/packages/library/",draft:!1,unlisted:!1,editUrl:"https://github.com/eegli/spotifly/tree/main/website/docs/packages/library/library.mdx",tags:[{label:"cli",permalink:"/docs/tags/cli"}],version:"current",frontMatter:{title:"Library",tags:["cli"]},sidebar:"tutorialSidebar",previous:{title:"Core",permalink:"/docs/packages/core"},next:{title:"Example Output",permalink:"/docs/packages/library/example-output"}},c={},d=[{value:"Motivation",id:"motivation",level:2},{value:"CLI Usage",id:"cli-usage",level:2},{value:"Flags and Commands",id:"flags-and-commands",level:3},{value:"Output",id:"output",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://img.shields.io/npm/v/@spotifly/library",alt:"npm"})," ",(0,r.jsx)(t.img,{src:"https://codecov.io/gh/eegli/spotifly/branch/main/graph/badge.svg?flag=library",alt:"Codecov"})]}),"\n",(0,r.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsx)(t.p,{children:"This package allows you to easily export your Spotify library to JSON. Each track can be enriched with the genres of its artists and its audio features (Spotify does not assign a genre to each track but rather to most artists, which thereforce act as a proxy)."}),"\n",(0,r.jsxs)(t.p,{children:["In order to access your library, you will need an access token from Spotify. You can get one from right ",(0,r.jsx)(t.a,{href:"/docs/authorization",children:"here."})]}),"\n",(0,r.jsx)(t.h2,{id:"cli-usage",children:"CLI Usage"}),"\n",(0,r.jsx)(t.p,{children:"Create your custom command using the query builder below and paste it into your terminal."}),"\n","\n","\n",(0,r.jsx)(l.q,{cli:"spotifly library",npx:"npx @spotifly/cli@latest library",accessToken:"",args:{type:["light","full"],since:"",last:"","out-dir":""},flags:{genres:!1,features:!1,compact:!1}}),"\n",(0,r.jsx)(t.h3,{id:"flags-and-commands",children:"Flags and Commands"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"Usage: spotifly library [command?] <...flags>\n\nCommands\n   help   Print this help message\n\nOptional flags\n   --compact [boolean]    Output more compact/minified JSON and save disk space. Default: false\n   --features [boolean]   Include audio features for each track. Default: false\n   --genres [boolean]     Include artist genres for each track. Default: false\n   --last [number]        Only include the last n (most recent) tracks. Default: All tracks\n   --out-dir [string]     Custom relative output directory. Default: Current directory\n   --profile [string]     The Spotifly profile to use for the Spotify API. Default profile: \"default\"\n   --since [date]         Only include tracks added after this date. The date string must be formatted according to the ECMAScript Date Time String Format, e.g.: \"YYYY-MM-DD\". Default: All tracks\n   --token [string]       A Spotify user access token. Requires at least the scope \"user-library-read\"\n   --type <full|light>    Output type per track. Either 'full' or 'light'. Default: 'light'\n   -h, --help             Print this help message\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Note that if both ",(0,r.jsx)(t.code,{children:"--last"})," and ",(0,r.jsx)(t.code,{children:"--since"})," are set, whatever condition is met first will exhaust the procedure."]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"light"})," track has a reduced set of properties:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"type TrackLight = {\n  id: string;\n  name: string;\n  album: {\n    name: string;\n    id: string;\n  };\n  artists: {\n    id: string;\n    name: string;\n  }[];\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Type ",(0,r.jsx)(t.code,{children:"full"})," has all track properties as they come from the Spotify API. The next page features an example of both outputs."]})]})}function p(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},5705:(e,t,a)=>{a.d(t,{q:()=>j});var r=a(2750),i=a(1758),l=a(4614),s=a(1230),n=a(483),o=a(1015),c=a(4669),d=a(5140),u=a(4591),p=a(7378),h=a(2806),f=a(5731),m=a(2536),g=a(4246);const y=e=>{let{children:t}=e;return(0,g.jsx)(m.Z,{language:"npx",children:t})},x=["token","profile"],b="auth method",j=e=>{let{cli:t,npx:a,args:m,flags:j,required:v=[],scopesKey:k,accessToken:C}=e;const[w,Z]=p.useState({...m,...j}),[S,D]=p.useState("token"),[O,I]=p.useState(""),q=null!=C,A=e=>v.includes(e),T={...w,[S]:O};return(0,g.jsxs)(h.C,{children:[q?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.Z,{component:"form",sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"15px 10px","& > *":{width:"25ch"},mb:2},children:[(0,g.jsx)(u.Z,{sx:{width:"25ch"},variant:"outlined",value:S,label:b,select:!0,required:!0,onChange:e=>{D(e.target.value),I("")},children:x.map((e=>(0,g.jsx)(c.Z,{value:e,children:e},e)))},b),(0,g.jsx)(u.Z,{type:"text",required:!0,label:S,value:O,onChange:e=>I(e.target.value),variant:"outlined"},"auth input")]}),(0,g.jsxs)("p",{children:["Using this command requires authentication. If you have Spotifly configuration file, you can specify a profile to use instead of an access token. If you specify a profile, an access token will be used automatically for you. See"," ",(0,g.jsx)("a",{href:"/docs/command-line#configuration-and-auto-authentication",children:"the docs about access configuration"}),"."]}),(0,g.jsx)("hr",{})]}):null,(0,g.jsx)(i.Z,{component:"form",sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"15px 10px","& > *":{width:"25ch"},mb:2},children:Object.entries(w).map((e=>{let[t,a]=e;return"boolean"==typeof a?(0,g.jsx)(i.Z,{display:"flex",justifyContent:"center",children:(0,g.jsx)(n.Z,{label:t,control:(0,g.jsx)(l.Z,{checked:a,onChange:()=>Z({...w,[t]:!a})},t)},t)},t):t===k?(0,g.jsxs)(s.Z,{required:A(t),children:[(0,g.jsx)(o.Z,{htmlFor:t,children:t}),(0,g.jsx)(d.Z,{multiple:!0,labelId:t,label:t,value:a,onChange:e=>Z({...w,[t]:e.target.value}),children:f.g8.map((e=>(0,g.jsx)(c.Z,{value:e,children:e},e)))})]},t):Array.isArray(a)?(0,g.jsx)(u.Z,{variant:"outlined",value:a[0],label:t,select:!0,required:A(t),onChange:e=>{Z({...w,[t]:(0,f.p1)(a,e.target.value)})},children:a.map((e=>(0,g.jsx)(c.Z,{value:e,children:e},e)))},t):(0,g.jsx)(u.Z,{type:"text",required:A(t),label:t,value:a,onChange:e=>Z({...w,[t]:e.target.value}),variant:"outlined"},t)}))}),[["With NPX",a],["With CLI",t]].map((e=>{let[t,a]=e;return(0,g.jsxs)(p.Fragment,{children:[(0,g.jsx)(r.Z,{fontWeight:"bold",children:t}),(0,g.jsx)(y,{children:(0,f._F)({base:a,obj:T,multiValueKeys:[k]})})]},t)}))]})}},2806:(e,t,a)=>{a.d(t,{C:()=>d});var r=a(5421),i=a(2905),l=a(5970),s=a(7378),n=a(4246);const o=(0,i.Z)({palette:{mode:"dark",primary:{main:"#90caf9",light:"#b5dcfb",dark:"#6bb8f7"}}}),c=(0,i.Z)({palette:{mode:"light",primary:{main:"#4a44a2",light:"#514bb2",dark:"#433d92"}}}),d=e=>{let{children:t}=e;const{colorMode:a}=(0,r.I)(),i=(0,s.useMemo)((()=>"light"===a?c:o),[a]);return(0,n.jsx)(l.Z,{theme:i,children:t})}},5731:(e,t,a)=>{function r(e){let{base:t,obj:a,multiValueKeys:r=[]}=e;return t.trim()+" "+Object.entries(a).reduce(((e,t)=>{let[a,i]=t;if(!1===i||""===i)return e;if(e+=`--${a} `,!0===i)return e;if(Array.isArray(i)){return e+=(r.includes(a)?`"${i.join(" ")}"`:i[0])+" "}return i.indexOf(" ")>-1&&" "!==i.slice(-1)&&(i=`"${i}"`),e+i+" "}),"").trim()}function i(e,t){const a=e.indexOf(t);return a>-1&&([e[0],e[a]]=[e[a],e[0]]),e}a.d(t,{_F:()=>r,g8:()=>l,p1:()=>i});const l=["ugc-image-upload","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","user-read-private","user-read-email","user-follow-modify","user-follow-read","user-library-modify","user-library-read","app-remote-control","user-read-playback-position","user-top-read","user-read-recently-played","playlist-modify-private","playlist-read-collaborative","playlist-read-private","playlist-modify-public"]}}]);