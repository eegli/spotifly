"use strict";(self.webpackChunk_spotifly_docs=self.webpackChunk_spotifly_docs||[]).push([[205],{2806:(e,t,a)=>{a.d(t,{C:()=>d});var o=a(5421),n=a(2905),r=a(9703),i=a(7378);const s=(0,n.Z)({palette:{mode:"dark",primary:{main:"#90caf9",light:"#b5dcfb",dark:"#6bb8f7"}}}),l=(0,n.Z)({palette:{mode:"light",primary:{main:"#4a44a2",light:"#514bb2",dark:"#433d92"}}}),d=e=>{let{children:t}=e;const{colorMode:a}=(0,o.I)(),n=(0,i.useMemo)((()=>"light"===a?l:s),[a]);return i.createElement(r.Z,{theme:n},t)}},5261:(e,t,a)=>{function o(e){let{base:t,obj:a,multiValueKeys:o=[]}=e;return t.trim()+" "+Object.entries(a).reduce(((e,t)=>{let[a,n]=t;if(!1===n||""===n)return e;if(e+="--"+a+" ",!0===n)return e;if(Array.isArray(n)){return e+=(o.includes(a)?'"'+n.join(" ")+'"':n[0])+" "}return n.indexOf(" ")>-1&&" "!==n.slice(-1)&&(n='"'+n+'"'),e+=n+" "}),"").trim()}function n(e,t){const a=e.indexOf(t);return a>-1&&([e[0],e[a]]=[e[a],e[0]]),e}a.d(t,{_F:()=>o,g8:()=>r,p1:()=>n});const r=["ugc-image-upload","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","user-read-private","user-read-email","user-follow-modify","user-follow-read","user-library-modify","user-library-read","app-remote-control","user-read-playback-position","user-top-read","user-read-recently-played","playlist-modify-private","playlist-read-collaborative","playlist-read-private","playlist-modify-public"]},9965:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>ve,contentTitle:()=>he,default:()=>be,frontMatter:()=>me,metadata:()=>ye,toc:()=>ge});var o=a(5773),n=a(7378),r=a(5318),i=a(5310),s=a(808),l=a(8944),d=a(1923),c=a(2267),p=a(7818),u=a(5608),m=a(6716),h=a(2858),y=a(1640),v=a(6749),g=a(4124);function f(e){return(0,v.Z)("MuiButton",e)}const b=(0,g.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const w=n.createContext({});var k=a(4246);const S=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],x=e=>(0,o.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Z=(0,u.ZP)(h.Z,{shouldForwardProp:e=>(0,u.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${(0,y.Z)(a.color)}`],t[`size${(0,y.Z)(a.size)}`],t[`${a.variant}Size${(0,y.Z)(a.size)}`],"inherit"===a.color&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth]}})((({theme:e,ownerState:t})=>{var a,n;return(0,o.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,o.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,p.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,p.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,p.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":(0,o.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${b.focusVisible}`]:(0,o.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${b.disabled}`]:(0,o.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"outlined"===t.variant&&"secondary"===t.color&&{border:`1px solid ${(e.vars||e).palette.action.disabled}`},"contained"===t.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${(0,p.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.vars?e.vars.palette.text.primary:null==(a=(n=e.palette).getContrastText)?void 0:a.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})}),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${b.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${b.disabled}`]:{boxShadow:"none"}})),C=(0,u.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,t[`iconSize${(0,y.Z)(a.size)}`]]}})((({ownerState:e})=>(0,o.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},x(e)))),I=(0,u.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,t[`iconSize${(0,y.Z)(a.size)}`]]}})((({ownerState:e})=>(0,o.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},x(e)))),z=n.forwardRef((function(e,t){const a=n.useContext(w),r=(0,d.Z)(a,e),i=(0,m.Z)({props:r,name:"MuiButton"}),{children:p,color:u="primary",component:h="button",className:v,disabled:g=!1,disableElevation:b=!1,disableFocusRipple:x=!1,endIcon:z,focusVisibleClassName:N,fullWidth:T=!1,size:E="medium",startIcon:R,type:$,variant:A="text"}=i,F=(0,s.Z)(i,S),P=(0,o.Z)({},i,{color:u,component:h,disabled:g,disableElevation:b,disableFocusRipple:x,fullWidth:T,size:E,type:$,variant:A}),L=(e=>{const{color:t,disableElevation:a,fullWidth:n,size:r,variant:i,classes:s}=e,l={root:["root",i,`${i}${(0,y.Z)(t)}`,`size${(0,y.Z)(r)}`,`${i}Size${(0,y.Z)(r)}`,"inherit"===t&&"colorInherit",a&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,y.Z)(r)}`],endIcon:["endIcon",`iconSize${(0,y.Z)(r)}`]},d=(0,c.Z)(l,f,s);return(0,o.Z)({},s,d)})(P),M=R&&(0,k.jsx)(C,{className:L.startIcon,ownerState:P,children:R}),O=z&&(0,k.jsx)(I,{className:L.endIcon,ownerState:P,children:z});return(0,k.jsxs)(Z,(0,o.Z)({ownerState:P,className:(0,l.Z)(v,a.className),component:h,disabled:g,focusRipple:!x,focusVisibleClassName:(0,l.Z)(L.focusVisible,N),ref:t,type:$},F,{classes:L,children:[M,p,O]}))}));var N=a(1230),T=a(1015),E=a(7090),R=a(3990),$=a(737),A=a(4591),F=function(){};var P="undefined"!=typeof window;const L=function(e,t,a){if(!P)return[t,F,F];if(!e)throw new Error("useLocalStorage key may not be falsy");var o=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,r=(0,n.useRef)((function(e){try{var n=a?a.raw?String:a.serializer:JSON.stringify,r=localStorage.getItem(e);return null!==r?o(r):(t&&localStorage.setItem(e,n(t)),t)}catch(i){return t}})),i=(0,n.useState)((function(){return r.current(e)})),s=i[0],l=i[1];(0,n.useLayoutEffect)((function(){return l(r.current(e))}),[e]);var d=(0,n.useCallback)((function(t){try{var n="function"==typeof t?t(s):t;if(void 0===n)return;var r=void 0;r=a?a.raw?"string"==typeof n?n:JSON.stringify(n):a.serializer?a.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,r),l(o(r))}catch(i){}}),[e,l]),c=(0,n.useCallback)((function(){try{localStorage.removeItem(e),l(void 0)}catch(i){}}),[e,l]);return[s,d,c]};function M(e,t){const{type:a,payload:o}=t;switch(a){case"setAuthType":return{...e,authType:o};case"setClientId":return{...e,clientId:o};case"setClientSecret":return{...e,clientSecret:o};case"setRefreshToken":return{...e,refreshToken:o};case"setScopes":{const t="string"==typeof o?[o]:o;return{...e,scopes:t}}case"setError":return{...e,error:o};default:return e}}var O=a(2806),G=a(5261),_=a(2750);const j=e=>{let{message:t}=e;return n.createElement(i.Z,{py:2,px:1},n.createElement(_.Z,null,t))};var B=a(872),V=a(3207),W=a(4942),D=a(6758),q=a(1183),U=a(8849);function J(e){return(0,v.Z)("MuiListItem",e)}const H=(0,g.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const X=(0,g.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Y(e){return(0,v.Z)("MuiListItemSecondaryAction",e)}(0,g.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const K=["className"],Q=(0,u.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.disableGutters&&t.disableGutters]}})((({ownerState:e})=>(0,o.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0}))),ee=n.forwardRef((function(e,t){const a=(0,m.Z)({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=a,i=(0,s.Z)(a,K),d=n.useContext(U.Z),p=(0,o.Z)({},a,{disableGutters:d.disableGutters}),u=(e=>{const{disableGutters:t,classes:a}=e,o={root:["root",t&&"disableGutters"]};return(0,c.Z)(o,Y,a)})(p);return(0,k.jsx)(Q,(0,o.Z)({className:(0,l.Z)(u.root,r),ownerState:p,ref:t},i))}));ee.muiName="ListItemSecondaryAction";const te=ee,ae=["className"],oe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],ne=(0,u.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,"flex-start"===a.alignItems&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters,!a.disablePadding&&t.padding,a.button&&t.button,a.hasSecondaryAction&&t.secondaryAction]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&(0,o.Z)({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${X.root}`]:{paddingRight:48}},{[`&.${H.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${H.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,p.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${H.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,p.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${H.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===t.alignItems&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${H.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,p.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,p.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48}))),re=(0,u.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),ie=n.forwardRef((function(e,t){const a=(0,m.Z)({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:i=!1,button:d=!1,children:p,className:u,component:y,components:v={},componentsProps:g={},ContainerComponent:f="li",ContainerProps:{className:b}={},dense:w=!1,disabled:S=!1,disableGutters:x=!1,disablePadding:Z=!1,divider:C=!1,focusVisibleClassName:I,secondaryAction:z,selected:N=!1}=a,T=(0,s.Z)(a.ContainerProps,ae),E=(0,s.Z)(a,oe),R=n.useContext(U.Z),$={dense:w||R.dense||!1,alignItems:r,disableGutters:x},A=n.useRef(null);(0,D.Z)((()=>{i&&A.current&&A.current.focus()}),[i]);const F=n.Children.toArray(p),P=F.length&&(0,W.Z)(F[F.length-1],["ListItemSecondaryAction"]),L=(0,o.Z)({},a,{alignItems:r,autoFocus:i,button:d,dense:$.dense,disabled:S,disableGutters:x,disablePadding:Z,divider:C,hasSecondaryAction:P,selected:N}),M=(e=>{const{alignItems:t,button:a,classes:o,dense:n,disabled:r,disableGutters:i,disablePadding:s,divider:l,hasSecondaryAction:d,selected:p}=e,u={root:["root",n&&"dense",!i&&"gutters",!s&&"padding",l&&"divider",r&&"disabled",a&&"button","flex-start"===t&&"alignItemsFlexStart",d&&"secondaryAction",p&&"selected"],container:["container"]};return(0,c.Z)(u,J,o)})(L),O=(0,q.Z)(A,t),G=v.Root||ne,_=g.root||{},j=(0,o.Z)({className:(0,l.Z)(M.root,_.className,u),disabled:S},E);let B=y||"li";return d&&(j.component=y||"div",j.focusVisibleClassName=(0,l.Z)(H.focusVisible,I),B=h.Z),P?(B=j.component||y?B:"div","li"===f&&("li"===B?B="div":"li"===j.component&&(j.component="div")),(0,k.jsx)(U.Z.Provider,{value:$,children:(0,k.jsxs)(re,(0,o.Z)({as:f,className:(0,l.Z)(M.container,b),ref:O,ownerState:L},T,{children:[(0,k.jsx)(G,(0,o.Z)({},_,!(0,V.Z)(G)&&{as:B,ownerState:(0,o.Z)({},L,_.ownerState)},j,{children:F})),F.pop()]}))})):(0,k.jsx)(U.Z.Provider,{value:$,children:(0,k.jsxs)(G,(0,o.Z)({},_,{as:B,ref:O,ownerState:L},!(0,V.Z)(G)&&{ownerState:(0,o.Z)({},L,_.ownerState)},j,{children:[F,z&&(0,k.jsx)(te,{children:z})]}))})}));var se=a(4662);const le=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],de=(0,u.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${se.Z.primary}`]:t.primary},{[`& .${se.Z.secondary}`]:t.secondary},t.root,a.inset&&t.inset,a.primary&&a.secondary&&t.multiline,a.dense&&t.dense]}})((({ownerState:e})=>(0,o.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56}))),ce=n.forwardRef((function(e,t){const a=(0,m.Z)({props:e,name:"MuiListItemText"}),{children:r,className:i,disableTypography:d=!1,inset:p=!1,primary:u,primaryTypographyProps:h,secondary:y,secondaryTypographyProps:v}=a,g=(0,s.Z)(a,le),{dense:f}=n.useContext(U.Z);let b=null!=u?u:r,w=y;const S=(0,o.Z)({},a,{disableTypography:d,inset:p,primary:!!b,secondary:!!w,dense:f}),x=(e=>{const{classes:t,inset:a,primary:o,secondary:n,dense:r}=e,i={root:["root",a&&"inset",r&&"dense",o&&n&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,c.Z)(i,se.L,t)})(S);return null==b||b.type===_.Z||d||(b=(0,k.jsx)(_.Z,(0,o.Z)({variant:f?"body2":"body1",className:x.primary,component:"span",display:"block"},h,{children:b}))),null==w||w.type===_.Z||d||(w=(0,k.jsx)(_.Z,(0,o.Z)({variant:"body2",className:x.secondary,color:"text.secondary",display:"block"},v,{children:w}))),(0,k.jsxs)(de,(0,o.Z)({className:(0,l.Z)(x.root,i),ownerState:S,ref:t},g,{children:[b,w]}))})),pe=e=>{let{expires:t,accessToken:a,refreshToken:o,scopes:r}=e;return n.createElement(B.Z,null,n.createElement(ie,{disablePadding:!0},n.createElement(ce,{primary:"Expires",secondary:"In "+new Date(t-Date.now()).getMinutes()+" minutes (at "+new Date(t).toLocaleTimeString()+")"})),n.createElement(ie,{disablePadding:!0},n.createElement(ce,{primary:"Scopes",secondary:r})),n.createElement(ie,{disablePadding:!0},n.createElement(ie,{disablePadding:!0},n.createElement(ce,{primary:"Access token",secondary:a}))),o&&n.createElement(ie,{disablePadding:!0},n.createElement(ce,{primary:"Refresh token",primaryTypographyProps:{color:"warning.light"},secondary:o,secondaryTypographyProps:{color:"warning.dark"}})))},ue=()=>{const[e,t]=(0,n.useReducer)(M,{authType:"Implicit Grant Flow",clientId:"",clientSecret:"",scopes:["user-read-email"],refreshToken:"",error:""}),a=("Implicit Grant Flow"===e.authType||"Authorization Code Flow"===e.authType&&e.clientSecret)&&e.clientId&&e.scopes.length>0,[r,s,l]=L("token");r&&r.expires<Date.now()&&l(),(0,n.useEffect)((()=>{if(window.opener&&"function"==typeof window.opener.spotifyCallback){const e=window.opener.spotifyCallback,t=window.location.search||window.location.hash.slice(1);e(new URLSearchParams(t))}}),[]);return n.createElement(O.C,null,n.createElement(i.Z,{component:"form",sx:{mt:4,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"15px 10px","& > *":{width:"100%"},mb:2}},n.createElement(N.Z,null,n.createElement(T.Z,null,"Authorization Type"),n.createElement($.Z,{onChange:e=>{t({type:"setAuthType",payload:e.target.value})},value:e.authType,label:"Authorization Type"},["Implicit Grant Flow","Authorization Code Flow"].map((e=>n.createElement(E.Z,{key:e,value:e},e))))),n.createElement(N.Z,null,n.createElement(T.Z,null,"Scopes"),n.createElement($.Z,{multiple:!0,value:e.scopes,onChange:e=>{t({type:"setScopes",payload:e.target.value})},input:n.createElement(R.Z,{label:"Scopes"})},G.g8.map((e=>n.createElement(E.Z,{key:e,value:e},e))))),n.createElement(A.Z,{value:e.clientId,label:"Client ID",key:"id",onChange:e=>{t({type:"setClientId",payload:e.target.value})}}),"Authorization Code Flow"===e.authType&&n.createElement(A.Z,{value:e.clientSecret,label:"Client Secret",key:"secret",onChange:e=>{t({type:"setClientSecret",payload:e.target.value})}})),a&&n.createElement(z,{sx:{mb:2,backgroundColor:"#1db954",color:"#fff"},variant:"contained",onClick:()=>{const a=function(e){let{type:t,clientId:a,scopes:o,redirectUri:n}=e;return"https://accounts.spotify.com/authorize?"+new URLSearchParams({response_type:"Implicit Grant Flow"===t?"token":"code",show_dialog:"true",client_id:encodeURIComponent(a),redirect_uri:n,scope:o.join(" ")}).toString()}({type:e.authType,clientId:e.clientId,scopes:e.scopes,redirectUri:window.location.href}),o=window.open(a,"Login with Spotify","width=500,height=800");window.spotifyCallback=async a=>{let n=a.get("access_token")||"";const r=a.get("code");if(a.get("error")||!r&&!n)t({type:"setError",payload:"Error logging in to Spotify. Did you click &quot;cancel&quot; in the popup?"});else{if(t({type:"setError",payload:""}),r){const{refresh_token:a,access_token:o}=await async function(e){let{clientId:t,clientSecret:a,redirectUri:o,code:n}=e;return fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded",Authorization:"Basic "+window.btoa(t+":"+a)},body:new URLSearchParams({grant_type:"authorization_code",code:n,redirect_uri:o}).toString()}).then((e=>e.json())).then((e=>e))}({clientId:e.clientId,clientSecret:e.clientSecret,code:r,redirectUri:window.location.href});t({type:"setRefreshToken",payload:a}),n=o}s({accessToken:n,scopes:e.scopes.join(", "),expires:new Date(Date.now()+36e5).getTime()}),null==o||o.close()}}}},"Login with Spotify"),e.error?n.createElement(j,{message:e.error}):r?n.createElement(pe,(0,o.Z)({},r,{refreshToken:e.refreshToken})):null)},me={title:"Authorization",hide_table_of_contents:!0,sidebar_position:2},he=void 0,ye={unversionedId:"authorization",id:"authorization",title:"Authorization",description:"In order to access Spotify's data, you will need a dedicated Spotify application (and, of course, a Spotify account). If you don't have one already, click the link below and create one. It's free!",source:"@site/docs/authorization.mdx",sourceDirName:".",slug:"/authorization",permalink:"/docs/authorization",draft:!1,editUrl:"https://github.com/eegli/spotifly/tree/main/docs/docs/authorization.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Authorization",hide_table_of_contents:!0,sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/overview"},next:{title:"Command Line",permalink:"/docs/command-line"}},ve={},ge=[{value:"Supported Grant Flows and Tokens",id:"supported-grant-flows-and-tokens",level:2},{value:"Implicit Grant Flow",id:"implicit-grant-flow",level:3},{value:"Authorization Code Flow",id:"authorization-code-flow",level:3},{value:"Getting an access token",id:"getting-an-access-token",level:2}],fe={toc:ge};function be(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,o.Z)({},fe,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In order to access Spotify's data, you will need a dedicated Spotify application (and, of course, a Spotify account). If you don't have one already, click the link below and create one. It's free!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.spotify.com/dashboard/"},"https://developer.spotify.com/dashboard/"),".")),(0,r.kt)("p",null,"After having created your application, click ",(0,r.kt)("em",{parentName:"p"},"edit")," and add the following two redirect URLs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"https://spotifly.nougat.dev/docs/authorization")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000")," (optional)")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Whitelisting the first URL enables you to create both short-lived access and long-lived refresh tokens directly on this page using the helper below."),(0,r.kt)("p",{parentName:"div"},"The second URL is needed when you want to generate a long-lived token locally (",(0,r.kt)("em",{parentName:"p"},"Authorization Code Flow"),"). You don't have to add it in your Spotify application. It's only needed when you want to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"auth-token")," package."))),(0,r.kt)("h2",{id:"supported-grant-flows-and-tokens"},"Supported Grant Flows and Tokens"),(0,r.kt)("p",null,"There are multiple ways to authorize with Spotify. We're particularly interested in two of them: ",(0,r.kt)("inlineCode",{parentName:"p"},"Implicit Grant Flow")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization Code Flow"),". Both of these methods eventually let us access user-related data on Spotify. Below is an excerpt from the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.spotify.com/documentation/general/guides/authorization/"},"Spotify documentation")," (",(0,r.kt)("em",{parentName:"p"},"May 2022"),")."),(0,r.kt)("h3",{id:"implicit-grant-flow"},"Implicit Grant Flow"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"The implicit grant flow is carried out on the client side and it does not involve secret keys. Thus, you do not need any server-side code to use it. Access tokens issued are short-lived with no refresh token to extend them when they expire"),"."),(0,r.kt)("h3",{id:"authorization-code-flow"},"Authorization Code Flow"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"The authorization code flow is suitable for long-running applications (e.g. web and mobile apps) where the user grants permission only once.")),(0,r.kt)("p",null,"In short:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"Authorization Code Flow")," involves exchanging a client secret. It generates both a short-lived access and long-lived ",(0,r.kt)("em",{parentName:"li"},"refresh")," token that can be used to independently renew the access token."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"Implicit Grant Flow")," does not include and secrets. It can only be carried out in a browser. The result is a short-lived ",(0,r.kt)("em",{parentName:"li"},"access token"),".")),(0,r.kt)("h2",{id:"getting-an-access-token"},"Getting an access token"),(0,r.kt)("p",null,"In order to authenticate with Spotify, most packages need a (short-lived) access token. If you're unsure what you need, ",(0,r.kt)("em",{parentName:"p"},"Implicit Grant")," is a good start! Tokens obtained from this flow expire after one hour and do not require the exchange of any secrets."),(0,r.kt)("p",null,"These short-lived tokens are saved locally in this browser as long as they are valid. If you select the ",(0,r.kt)("em",{parentName:"p"},"Authorization Code Flow"),", the generated ",(0,r.kt)("strong",{parentName:"p"},"refresh token")," will ",(0,r.kt)("strong",{parentName:"p"},"not")," be saved in your browser. Copy it before you leave the page!"),(0,r.kt)("p",null,"Last but not least, note that all packages that require a token will list what scopes are needed."),(0,r.kt)(ue,{mdxType:"AuthTokenForm"}))}be.isMDXComponent=!0}}]);