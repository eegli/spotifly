"use strict";(self.webpackChunk_spotifly_website=self.webpackChunk_spotifly_website||[]).push([[644],{2699:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var s=i(4246),l=i(1670);const t={sidebar_position:3},a="Command Line",o={id:"command-line",title:"Command Line",description:"Installing the CLI",source:"@site/docs/command-line.mdx",sourceDirName:".",slug:"/command-line",permalink:"/docs/command-line",draft:!1,unlisted:!1,editUrl:"https://github.com/eegli/spotifly/tree/main/website/docs/command-line.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Authorization",permalink:"/docs/authorization"},next:{title:"Auth Token",permalink:"/docs/packages/auth-token"}},r={},c=[{value:"Installing the CLI",id:"installing-the-cli",level:2},{value:"Configuration and Auto-Authentication",id:"configuration-and-auto-authentication",level:2},{value:"Using Profiles",id:"using-profiles",level:3},{value:"Listing Profiles",id:"listing-profiles",level:3},{value:"Why would you use different profiles?",id:"why-would-you-use-different-profiles",level:3},{value:"Why does this require a configuration file?",id:"why-does-this-require-a-configuration-file",level:3},{value:"Usage with NPX / Yarn DLX",id:"usage-with-npx--yarn-dlx",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"command-line",children:"Command Line"}),"\n",(0,s.jsx)(n.h2,{id:"installing-the-cli",children:"Installing the CLI"}),"\n",(0,s.jsx)(n.p,{children:"Spotifly's wrapper CLI can be installed globally. It ships with the latest versions of all executables (as subcommands) from this project. The CLI and all other packages require at least Node 18."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn global add @spotifly/cli@latest\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install -g @spotifly/cli@latest\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"spotifly [subcommand] [args...]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-and-auto-authentication",children:"Configuration and Auto-Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["Many CLI operations require an access token to talk to the Spotify API - usually in the form of a ",(0,s.jsx)(n.code,{children:"--token"})," command line argument. If you don't want to manually generate one every time you use the CLI, you can ",(0,s.jsx)(n.em,{children:"optionally"})," create a ",(0,s.jsx)(n.code,{children:".spotifly"}),' config file in your home directory. You\'ll need to add at least a profile named "default" if you want to use an access configuration file. For example:']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[default]\nspt_client_id=a02b6c2ef3e7\nspt_client_secret=4e11b25b6f\nspt_refresh_token=AQChZXEeZs0r8wNdLaQmCxtORFIh5j4\n\n[dev]\nspt_client_id=a02b6c2ef3e7\nspt_client_secret=4e11b25b6f\nspt_refresh_token=AQChZXEeZs0r8wNdLaQmCxtORFIh5j4\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:".spotifly"})," config file in the current directory takes precedence over configuration in your home directory."]})}),"\n",(0,s.jsx)(n.h3,{id:"using-profiles",children:"Using Profiles"}),"\n",(0,s.jsxs)(n.p,{children:["The INI format allows you to create multiple profiles. Each profile must have the three keys depicted above. All subcommands that accept a ",(0,s.jsx)(n.code,{children:"--token"})," flag also accept a ",(0,s.jsx)(n.code,{children:"--profile"})," flag as an alternative. You need to provide either. Here's how profiles and tokens work together:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"--token <token>"})," is provided, the app will use the token and ignore all profiles"]}),"\n",(0,s.jsxs)(n.li,{children:["If no token and no ",(0,s.jsx)(n.code,{children:"--profile"})," flag is provided, the app will look for a profile with the name ",(0,s.jsx)(n.code,{children:"default"})]}),"\n",(0,s.jsxs)(n.li,{children:["If a ",(0,s.jsx)(n.code,{children:"--profile <profile>"})," flag is provided, the app will look for a profile with the name ",(0,s.jsx)(n.code,{children:"<profile>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Examples:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Implicitly use the default profile\nspotifly library\n\n# Use the dev profile\nspotifly library --profile dev\n"})}),"\n",(0,s.jsx)(n.p,{children:"Currently, the following packages support profiles:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/packages/library",children:(0,s.jsx)(n.code,{children:"@spotifly/library"})})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"listing-profiles",children:"Listing Profiles"}),"\n",(0,s.jsx)(n.p,{children:"You can list all available profiles using:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"spotifly profiles\n"})}),"\n",(0,s.jsx)(n.h3,{id:"why-would-you-use-different-profiles",children:"Why would you use different profiles?"}),"\n",(0,s.jsxs)(n.p,{children:["Remember: Spotify refresh tokens are ",(0,s.jsx)(n.em,{children:"created for"})," a spotify application and ",(0,s.jsx)(n.em,{children:"bound to"})," a user ",(0,s.jsx)(n.strong,{children:"and"})," access scope. Hence, you may have multiple profiles for a single spotify application, whereas the client id and secret are the same. The refresh tokens, however, may be different. You could have a profile for readonly access, another for read/write access, etc."]}),"\n",(0,s.jsx)(n.h3,{id:"why-does-this-require-a-configuration-file",children:"Why does this require a configuration file?"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Why can't I just pass my long-term credentials as flags?"})," It is a very bad idea to ",(0,s.jsx)(n.a,{href:"https://clig.dev/#arguments-and-flags",children:"read secrets from flags"}),". Long story short is that your credentials will leak to other places like your shell history. Hence, only reading from a configuration file is supported."]}),"\n",(0,s.jsx)(n.h2,{id:"usage-with-npx--yarn-dlx",children:"Usage with NPX / Yarn DLX"}),"\n",(0,s.jsxs)(n.p,{children:["Instead of installing the CLI, every package can also be invoked directly with ",(0,s.jsx)(n.code,{children:"npx"}),". This will download and save the executable in npm's local cache but not permanently add it to the PATH. ",(0,s.jsx)(n.a,{href:"https://docs.npmjs.com/cli/v7/commands/npx",children:"How NPX works"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx @spotifly/cli@latest [...args]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Alternatively, if you're in a workspace that uses ",(0,s.jsx)(n.a,{href:"https://yarnpkg.com/cli/dlx",children:"Yarn Berry"}),", you can use ",(0,s.jsx)(n.code,{children:"yarn dlx"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn dlx @spotifly/cli@latest [...args]\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["If a package is invoked with ",(0,s.jsx)(n.code,{children:"npx"})," and not in the cache, a prompt will ask you to install it. You can suppress the prompt by adding ",(0,s.jsx)(n.code,{children:"--yes"})," right after ",(0,s.jsx)(n.code,{children:"npx"}),". This is useful if you want to run any command in a CI/CD environment."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx --yes @spotifly/cli@latest [...args]\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1670:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>a});var s=i(7378);const l={},t=s.createContext(l);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);