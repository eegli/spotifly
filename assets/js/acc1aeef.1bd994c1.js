"use strict";(self.webpackChunk_spotifly_docs=self.webpackChunk_spotifly_docs||[]).push([[205],{9303:function(e,t,o){o.d(t,{C:function(){return c}});var n=o(7927),a=o(2905),r=o(9703),i=o(7378),s=(0,a.Z)({palette:{mode:"dark",primary:{main:"#90caf9",light:"#b5dcfb",dark:"#6bb8f7"}}}),l=(0,a.Z)({palette:{mode:"light",primary:{main:"#4a44a2",light:"#514bb2",dark:"#433d92"}}}),c=function(e){var t=e.children,o=(0,n.If)().colorMode,a=(0,i.useMemo)((function(){return"light"===o?l:s}),[o]);return i.createElement(r.Z,{theme:a},t)}},8544:function(e,t,o){function n(e){var t=e.base,o=e.obj,n=e.multiValueKeys,a=void 0===n?[]:n;return t.trim()+" "+Object.entries(o).reduce((function(e,t){var o=t[0],n=t[1];return!1===n||""===n?e:(e+="--"+o+" ",!0===n?e:Array.isArray(n)?e+=(a.includes(o)?'"'+n.join(" ")+'"':n[0])+" ":(n.indexOf(" ")>-1&&" "!==n.slice(-1)&&(n='"'+n+'"'),e+=n+" "))}),"").trim()}function a(e,t){var o=e.indexOf(t);if(o>-1){var n=[e[o],e[0]];e[0]=n[0],e[o]=n[1]}return e}o.d(t,{_F:function(){return n},g8:function(){return r},p1:function(){return a}});var r=["ugc-image-upload","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","user-read-private","user-read-email","user-follow-modify","user-follow-read","user-library-modify","user-library-read","app-remote-control","user-read-playback-position","user-top-read","user-read-recently-played","playlist-modify-private","playlist-read-collaborative","playlist-read-private","playlist-modify-public"]},3138:function(e,t,o){o.r(t),o.d(t,{assets:function(){return Se},contentTitle:function(){return we},default:function(){return Ie},frontMatter:function(){return ve},metadata:function(){return ke},toc:function(){return xe}});var n=o(2685),a=o(1244),r=o(7378),i=o(5318),s=o(3127),l=o(685),c=o.n(l),d=o(5310),p=o(8944),u=o(1923),m=o(3892),h=o(7818),y=o(5608),f=o(6716),g=o(8045),b=o(1640),v=o(765),w=o(2897);function k(e){return(0,v.Z)("MuiButton",e)}var S=(0,w.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var x=r.createContext({}),Z=o(4246);const I=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],z=e=>(0,n.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),C=(0,y.ZP)(g.Z,{shouldForwardProp:e=>(0,y.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${(0,b.Z)(o.color)}`],t[`size${(0,b.Z)(o.size)}`],t[`${o.variant}Size${(0,b.Z)(o.size)}`],"inherit"===o.color&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth]}})((({theme:e,ownerState:t})=>(0,n.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,n.Z)({textDecoration:"none",backgroundColor:(0,h.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:(0,h.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${e.palette[t.color].main}`,backgroundColor:(0,h.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.palette[t.color].dark,"@media (hover: none)":{backgroundColor:e.palette[t.color].main}}),"&:active":(0,n.Z)({},"contained"===t.variant&&{boxShadow:e.shadows[8]}),[`&.${S.focusVisible}`]:(0,n.Z)({},"contained"===t.variant&&{boxShadow:e.shadows[6]}),[`&.${S.disabled}`]:(0,n.Z)({color:e.palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${e.palette.action.disabledBackground}`},"outlined"===t.variant&&"secondary"===t.color&&{border:`1px solid ${e.palette.action.disabled}`},"contained"===t.variant&&{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].main,border:`1px solid ${(0,h.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].contrastText,backgroundColor:e.palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${S.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${S.disabled}`]:{boxShadow:"none"}})),N=(0,y.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,t[`iconSize${(0,b.Z)(o.size)}`]]}})((({ownerState:e})=>(0,n.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},z(e)))),T=(0,y.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,t[`iconSize${(0,b.Z)(o.size)}`]]}})((({ownerState:e})=>(0,n.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},z(e))));var R=r.forwardRef((function(e,t){const o=r.useContext(x),i=(0,u.Z)(o,e),s=(0,f.Z)({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:h,disabled:y=!1,disableElevation:g=!1,disableFocusRipple:v=!1,endIcon:w,focusVisibleClassName:S,fullWidth:z=!1,size:R="medium",startIcon:E,type:A,variant:F="text"}=s,P=(0,a.Z)(s,I),L=(0,n.Z)({},s,{color:c,component:d,disabled:y,disableElevation:g,disableFocusRipple:v,fullWidth:z,size:R,type:A,variant:F}),M=(e=>{const{color:t,disableElevation:o,fullWidth:a,size:r,variant:i,classes:s}=e,l={root:["root",i,`${i}${(0,b.Z)(t)}`,`size${(0,b.Z)(r)}`,`${i}Size${(0,b.Z)(r)}`,"inherit"===t&&"colorInherit",o&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,b.Z)(r)}`],endIcon:["endIcon",`iconSize${(0,b.Z)(r)}`]},c=(0,m.Z)(l,k,s);return(0,n.Z)({},s,c)})(L),$=E&&(0,Z.jsx)(N,{className:M.startIcon,ownerState:L,children:E}),G=w&&(0,Z.jsx)(T,{className:M.endIcon,ownerState:L,children:w});return(0,Z.jsxs)(C,(0,n.Z)({ownerState:L,className:(0,p.Z)(h,o.className),component:d,disabled:y,focusRipple:!v,focusVisibleClassName:(0,p.Z)(M.focusVisible,S),ref:t,type:A},P,{classes:M,children:[$,l,G]}))})),E=o(1230),A=o(1015),F=o(7090),P=o(3990),L=o(7802),M=o(4591),$=function(){};var G="undefined"!=typeof window,O=function(e,t,o){if(!G)return[t,$,$];if(!e)throw new Error("useLocalStorage key may not be falsy");var n=o?o.raw?function(e){return e}:o.deserializer:JSON.parse,a=(0,r.useRef)((function(e){try{var a=o?o.raw?String:o.serializer:JSON.stringify,r=localStorage.getItem(e);return null!==r?n(r):(t&&localStorage.setItem(e,a(t)),t)}catch(i){return t}})),i=(0,r.useState)((function(){return a.current(e)})),s=i[0],l=i[1];(0,r.useLayoutEffect)((function(){return l(a.current(e))}),[e]);var c=(0,r.useCallback)((function(t){try{var a="function"==typeof t?t(s):t;if(void 0===a)return;var r=void 0;r=o?o.raw?"string"==typeof a?a:JSON.stringify(a):o.serializer?o.serializer(a):JSON.stringify(a):JSON.stringify(a),localStorage.setItem(e,r),l(n(r))}catch(i){}}),[e,l]),d=(0,r.useCallback)((function(){try{localStorage.removeItem(e),l(void 0)}catch(i){}}),[e,l]);return[s,c,d]};function j(e){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(c().mark((function e(t){var o,n,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.clientId,n=t.clientSecret,a=t.redirectUri,r=t.code,e.abrupt("return",fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded",Authorization:"Basic "+window.btoa(o+":"+n)},body:new URLSearchParams({grant_type:"authorization_code",code:r,redirect_uri:a}).toString()}).then((function(e){return e.json()})).then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){var o=t.type,n=t.payload;switch(o){case"setAuthType":return Object.assign({},e,{authType:n});case"setClientId":return Object.assign({},e,{clientId:n});case"setClientSecret":return Object.assign({},e,{clientSecret:n});case"setRefreshToken":return Object.assign({},e,{refreshToken:n});case"setScopes":var a="string"==typeof n?[n]:n;return Object.assign({},e,{scopes:a});case"setError":return Object.assign({},e,{error:n});default:return e}}var V=o(9303),D=o(8544),W=o(8389),q=function(e){var t=e.message;return r.createElement(d.Z,{py:2,px:1},r.createElement(W.Z,null,t))},U=o(872),J=o(3207),H=o(4942),X=o(6758),Y=o(1183),K=o(8849);function Q(e){return(0,v.Z)("MuiListItem",e)}var ee=(0,w.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var te=(0,w.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function oe(e){return(0,v.Z)("MuiListItemSecondaryAction",e)}(0,w.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const ne=["className"],ae=(0,y.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})((({ownerState:e})=>(0,n.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0}))),re=r.forwardRef((function(e,t){const o=(0,f.Z)({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=o,s=(0,a.Z)(o,ne),l=r.useContext(K.Z),c=(0,n.Z)({},o,{disableGutters:l.disableGutters}),d=(e=>{const{disableGutters:t,classes:o}=e,n={root:["root",t&&"disableGutters"]};return(0,m.Z)(n,oe,o)})(c);return(0,Z.jsx)(ae,(0,n.Z)({className:(0,p.Z)(d.root,i),ownerState:c,ref:t},s))}));re.muiName="ListItemSecondaryAction";var ie=re;const se=["className"],le=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],ce=(0,y.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,"flex-start"===o.alignItems&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.button&&t.button,o.hasSecondaryAction&&t.secondaryAction]}})((({theme:e,ownerState:t})=>(0,n.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&(0,n.Z)({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${te.root}`]:{paddingRight:48}},{[`&.${ee.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${ee.selected}`]:{backgroundColor:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ee.focusVisible}`]:{backgroundColor:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${ee.disabled}`]:{opacity:e.palette.action.disabledOpacity}},"flex-start"===t.alignItems&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ee.selected}:hover`]:{backgroundColor:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,h.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48}))),de=(0,y.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"});var pe=r.forwardRef((function(e,t){const o=(0,f.Z)({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:s=!1,button:l=!1,children:c,className:d,component:u,components:h={},componentsProps:y={},ContainerComponent:b="li",ContainerProps:{className:v}={},dense:w=!1,disabled:k=!1,disableGutters:S=!1,disablePadding:x=!1,divider:I=!1,focusVisibleClassName:z,secondaryAction:C,selected:N=!1}=o,T=(0,a.Z)(o.ContainerProps,se),R=(0,a.Z)(o,le),E=r.useContext(K.Z),A={dense:w||E.dense||!1,alignItems:i,disableGutters:S},F=r.useRef(null);(0,X.Z)((()=>{s&&F.current&&F.current.focus()}),[s]);const P=r.Children.toArray(c),L=P.length&&(0,H.Z)(P[P.length-1],["ListItemSecondaryAction"]),M=(0,n.Z)({},o,{alignItems:i,autoFocus:s,button:l,dense:A.dense,disabled:k,disableGutters:S,disablePadding:x,divider:I,hasSecondaryAction:L,selected:N}),$=(e=>{const{alignItems:t,button:o,classes:n,dense:a,disabled:r,disableGutters:i,disablePadding:s,divider:l,hasSecondaryAction:c,selected:d}=e,p={root:["root",a&&"dense",!i&&"gutters",!s&&"padding",l&&"divider",r&&"disabled",o&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",d&&"selected"],container:["container"]};return(0,m.Z)(p,Q,n)})(M),G=(0,Y.Z)(F,t),O=h.Root||ce,j=y.root||{},_=(0,n.Z)({className:(0,p.Z)($.root,j.className,d),disabled:k},R);let B=u||"li";return l&&(_.component=u||"div",_.focusVisibleClassName=(0,p.Z)(ee.focusVisible,z),B=g.Z),L?(B=_.component||u?B:"div","li"===b&&("li"===B?B="div":"li"===_.component&&(_.component="div")),(0,Z.jsx)(K.Z.Provider,{value:A,children:(0,Z.jsxs)(de,(0,n.Z)({as:b,className:(0,p.Z)($.container,v),ref:G,ownerState:M},T,{children:[(0,Z.jsx)(O,(0,n.Z)({},j,!(0,J.Z)(O)&&{as:B,ownerState:(0,n.Z)({},M,j.ownerState)},_,{children:P})),P.pop()]}))})):(0,Z.jsx)(K.Z.Provider,{value:A,children:(0,Z.jsxs)(O,(0,n.Z)({},j,{as:B,ref:G,ownerState:M},!(0,J.Z)(O)&&{ownerState:(0,n.Z)({},M,j.ownerState)},_,{children:[P,C&&(0,Z.jsx)(ie,{children:C})]}))})})),ue=o(4662);const me=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],he=(0,y.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${ue.Z.primary}`]:t.primary},{[`& .${ue.Z.secondary}`]:t.secondary},t.root,o.inset&&t.inset,o.primary&&o.secondary&&t.multiline,o.dense&&t.dense]}})((({ownerState:e})=>(0,n.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})));var ye=r.forwardRef((function(e,t){const o=(0,f.Z)({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:l=!1,inset:c=!1,primary:d,primaryTypographyProps:u,secondary:h,secondaryTypographyProps:y}=o,g=(0,a.Z)(o,me),{dense:b}=r.useContext(K.Z);let v=null!=d?d:i,w=h;const k=(0,n.Z)({},o,{disableTypography:l,inset:c,primary:!!v,secondary:!!w,dense:b}),S=(e=>{const{classes:t,inset:o,primary:n,secondary:a,dense:r}=e,i={root:["root",o&&"inset",r&&"dense",n&&a&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,m.Z)(i,ue.L,t)})(k);return null==v||v.type===W.Z||l||(v=(0,Z.jsx)(W.Z,(0,n.Z)({variant:b?"body2":"body1",className:S.primary,component:"span",display:"block"},u,{children:v}))),null==w||w.type===W.Z||l||(w=(0,Z.jsx)(W.Z,(0,n.Z)({variant:"body2",className:S.secondary,color:"text.secondary",display:"block"},y,{children:w}))),(0,Z.jsxs)(he,(0,n.Z)({className:(0,p.Z)(S.root,s),ownerState:k,ref:t},g,{children:[v,w]}))})),fe=function(e){var t=e.expires,o=e.accessToken,n=e.refreshToken,a=e.scopes;return r.createElement(U.Z,null,r.createElement(pe,{disablePadding:!0},r.createElement(ye,{primary:"Expires",secondary:"In "+new Date(t-Date.now()).getMinutes()+" minutes (at "+new Date(t).toLocaleTimeString()+")"})),r.createElement(pe,{disablePadding:!0},r.createElement(ye,{primary:"Scopes",secondary:a})),r.createElement(pe,{disablePadding:!0},r.createElement(pe,{disablePadding:!0},r.createElement(ye,{primary:"Access token",secondary:o}))),n&&r.createElement(pe,{disablePadding:!0},r.createElement(ye,{primary:"Refresh token",primaryTypographyProps:{color:"warning.light"},secondary:n,secondaryTypographyProps:{color:"warning.dark"}})))},ge=function(){var e=(0,r.useReducer)(B,{authType:"Implicit Grant Flow",clientId:"",clientSecret:"",scopes:["user-read-email"],refreshToken:"",error:""}),t=e[0],o=e[1],a=("Implicit Grant Flow"===t.authType||"Authorization Code Flow"===t.authType&&t.clientSecret)&&t.clientId&&t.scopes.length>0,i=O("token"),l=i[0],p=i[1],u=i[2];l&&l.expires<Date.now()&&u(),(0,r.useEffect)((function(){if(window.opener&&"function"==typeof window.opener.spotifyCallback){var e=window.opener.spotifyCallback,t=window.location.search||window.location.hash.slice(1);e(new URLSearchParams(t))}}),[]);return r.createElement(V.C,null,r.createElement(d.Z,{component:"form",sx:{mt:4,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"15px 10px","& > *":{width:"100%"},mb:2}},r.createElement(E.Z,null,r.createElement(A.Z,null,"Authorization Type"),r.createElement(L.Z,{onChange:function(e){o({type:"setAuthType",payload:e.target.value})},value:t.authType,label:"Authorization Type"},["Implicit Grant Flow","Authorization Code Flow"].map((function(e){return r.createElement(F.Z,{key:e,value:e},e)})))),r.createElement(E.Z,null,r.createElement(A.Z,null,"Scopes"),r.createElement(L.Z,{multiple:!0,value:t.scopes,onChange:function(e){o({type:"setScopes",payload:e.target.value})},input:r.createElement(P.Z,{label:"Scopes"})},D.g8.map((function(e){return r.createElement(F.Z,{key:e,value:e},e)})))),r.createElement(M.Z,{value:t.clientId,label:"Client ID",key:"id",onChange:function(e){o({type:"setClientId",payload:e.target.value})}}),"Authorization Code Flow"===t.authType&&r.createElement(M.Z,{value:t.clientSecret,label:"Client Secret",key:"secret",onChange:function(e){o({type:"setClientSecret",payload:e.target.value})}})),a&&r.createElement(R,{sx:{mb:2,backgroundColor:"#1db954",color:"#fff"},variant:"contained",onClick:function(){var e,n,a,r,i,l=(e={type:t.authType,clientId:t.clientId,scopes:t.scopes,redirectUri:window.location.href},n=e.type,a=e.clientId,r=e.scopes,i=e.redirectUri,"https://accounts.spotify.com/authorize?"+new URLSearchParams({response_type:"Implicit Grant Flow"===n?"token":"code",show_dialog:"true",client_id:encodeURIComponent(a),redirect_uri:i,scope:r.join(" ")}).toString()),d=window.open(l,"Login with Spotify","width=500,height=800");window.spotifyCallback=function(){var e=(0,s.Z)(c().mark((function e(n){var a,r,i,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.get("access_token")||"",r=n.get("code"),!n.get("error")&&(r||a)){e.next=6;break}return o({type:"setError",payload:"Error logging in to Spotify. Did you click &quot;cancel&quot; in the popup?"}),e.abrupt("return");case 6:if(o({type:"setError",payload:""}),!r){e.next=15;break}return e.next=10,j({clientId:t.clientId,clientSecret:t.clientSecret,code:r,redirectUri:window.location.href});case 10:i=e.sent,s=i.refresh_token,l=i.access_token,o({type:"setRefreshToken",payload:s}),a=l;case 15:p({accessToken:a,scopes:t.scopes.join(", "),expires:new Date(Date.now()+36e5).getTime()}),null==d||d.close();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},"Login with Spotify"),t.error?r.createElement(q,{message:t.error}):l?r.createElement(fe,(0,n.Z)({},l,{refreshToken:t.refreshToken})):null)},be=["components"],ve={title:"Authorization",hide_table_of_contents:!0,sidebar_position:2},we=void 0,ke={unversionedId:"authorization",id:"authorization",title:"Authorization",description:"In order to access Spotify's data, you will need a dedicated Spotify application (and, of course, a Spotify account). If you don't have one already, click the link below and create one. It's free!",source:"@site/docs/authorization.mdx",sourceDirName:".",slug:"/authorization",permalink:"/docs/authorization",editUrl:"https://github.com/eegli/spotifly/tree/main/docs/docs/authorization.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Authorization",hide_table_of_contents:!0,sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/overview"},next:{title:"Command Line",permalink:"/docs/command-line"}},Se={},xe=[{value:"Supported Grant Flows and Tokens",id:"supported-grant-flows-and-tokens",level:2},{value:"Implicit Grant Flow",id:"implicit-grant-flow",level:3},{value:"Authorization Code Flow",id:"authorization-code-flow",level:3},{value:"Getting an access token",id:"getting-an-access-token",level:2}],Ze={toc:xe};function Ie(e){var t=e.components,o=(0,a.Z)(e,be);return(0,i.kt)("wrapper",(0,n.Z)({},Ze,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In order to access Spotify's data, you will need a dedicated Spotify application (and, of course, a Spotify account). If you don't have one already, click the link below and create one. It's free!"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developer.spotify.com/dashboard/"},"https://developer.spotify.com/dashboard/"),".")),(0,i.kt)("p",null,"After having created your application, click ",(0,i.kt)("em",{parentName:"p"},"edit")," and add the following two redirect URLs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://spotifly.nougat.dev/docs/authorization")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"http://localhost:3000")," (optional)")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Whitelisting the first URL enables you to create both short-lived access and long-lived refresh tokens directly on this page using the helper below."),(0,i.kt)("p",{parentName:"div"},"The second URL is needed when you want to generate a long-lived token locally (",(0,i.kt)("em",{parentName:"p"},"Authorization Code Flow"),"). You don't have to add it in your Spotify application. It's only needed when you want to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"auth-token")," package."))),(0,i.kt)("h2",{id:"supported-grant-flows-and-tokens"},"Supported Grant Flows and Tokens"),(0,i.kt)("p",null,"There are multiple ways to authorize with Spotify. We're particularly interested in two of them: ",(0,i.kt)("inlineCode",{parentName:"p"},"Implicit Grant Flow")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization Code Flow"),". Both of these methods eventually let us access user-related data on Spotify. Below is an excerpt from the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.spotify.com/documentation/general/guides/authorization/"},"Spotify documentation")," (",(0,i.kt)("em",{parentName:"p"},"May 2022"),")."),(0,i.kt)("h3",{id:"implicit-grant-flow"},"Implicit Grant Flow"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"The implicit grant flow is carried out on the client side and it does not involve secret keys. Thus, you do not need any server-side code to use it. Access tokens issued are short-lived with no refresh token to extend them when they expire"),"."),(0,i.kt)("h3",{id:"authorization-code-flow"},"Authorization Code Flow"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"The authorization code flow is suitable for long-running applications (e.g. web and mobile apps) where the user grants permission only once.")),(0,i.kt)("p",null,"In short:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("em",{parentName:"li"},"Authorization Code Flow")," involves exchanging a client secret. It generates both a short-lived access and long-lived ",(0,i.kt)("em",{parentName:"li"},"refresh")," token that can be used to independently renew the access token."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("em",{parentName:"li"},"Implicit Grant Flow")," does not include and secrets. It can only be carried out in a browser. The result is a short-lived ",(0,i.kt)("em",{parentName:"li"},"access token"),".")),(0,i.kt)("h2",{id:"getting-an-access-token"},"Getting an access token"),(0,i.kt)("p",null,"In order to authenticate with Spotify, most packages need a (short-lived) access token. If you're unsure what you need, ",(0,i.kt)("em",{parentName:"p"},"Implicit Grant")," is a good start! Tokens obtained from this flow expire after one hour and do not require the exchange of any secrets."),(0,i.kt)("p",null,"These short-lived tokens are saved locally in this browser as long as they are valid. If you select the ",(0,i.kt)("em",{parentName:"p"},"Authorization Code Flow"),", the generated ",(0,i.kt)("strong",{parentName:"p"},"refresh token")," will ",(0,i.kt)("strong",{parentName:"p"},"not")," be saved in your browser. Copy it before you leave the page!"),(0,i.kt)("p",null,"Last but not least, note that all packages that require a token will list what scopes are needed."),(0,i.kt)(ge,{mdxType:"AuthTokenForm"}))}Ie.isMDXComponent=!0}}]);